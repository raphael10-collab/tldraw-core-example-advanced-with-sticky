var g=Object.defineProperty,z=Object.defineProperties,Q=Object.getOwnPropertyDescriptor,ee=Object.getOwnPropertyDescriptors,ne=Object.getOwnPropertyNames,W=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var A=(e,n,t)=>n in e?g(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,T=(e,n)=>{for(var t in n||(n={}))M.call(n,t)&&A(e,t,n[t]);if(W)for(var t of W(n))te.call(n,t)&&A(e,t,n[t]);return e},x=(e,n)=>z(e,ee(n)),re=e=>g(e,"__esModule",{value:!0});var ie=(e,n)=>{for(var t in n)g(e,t,{get:n[t],enumerable:!0})},ue=(e,n,t,i)=>{if(n&&typeof n=="object"||typeof n=="function")for(let r of ne(n))!M.call(e,r)&&(t||r!=="default")&&g(e,r,{get:()=>n[r],enumerable:!(i=Q(n,r))||i.enumerable});return e};var se=(e=>(n,t)=>e&&e.get(n)||(t=ue(re({}),n,1),e&&e.set(n,t),t))(typeof WeakMap!="undefined"?new WeakMap:0);var We={};ie(We,{intersectArcBounds:()=>Le,intersectArcLineSegment:()=>G,intersectArcRectangle:()=>C,intersectBoundsArc:()=>Se,intersectBoundsBounds:()=>ye,intersectBoundsCircle:()=>ae,intersectBoundsEllipse:()=>we,intersectBoundsLineSegment:()=>K,intersectBoundsPolygon:()=>Ye,intersectBoundsPolyline:()=>Xe,intersectBoundsRay:()=>Be,intersectBoundsRectangle:()=>Re,intersectCircleBounds:()=>he,intersectCircleCircle:()=>pe,intersectCircleLineSegment:()=>Ie,intersectCircleRectangle:()=>_,intersectEllipseBounds:()=>xe,intersectEllipseCircle:()=>Te,intersectEllipseEllipse:()=>J,intersectEllipseLineSegment:()=>H,intersectEllipseRay:()=>ge,intersectEllipseRectangle:()=>P,intersectLineLine:()=>ce,intersectLineSegmentArc:()=>$,intersectLineSegmentBounds:()=>le,intersectLineSegmentCircle:()=>y,intersectLineSegmentEllipse:()=>S,intersectLineSegmentLineSegment:()=>R,intersectLineSegmentPolygon:()=>v,intersectLineSegmentPolyline:()=>a,intersectLineSegmentRay:()=>de,intersectLineSegmentRectangle:()=>V,intersectPolygonBounds:()=>U,intersectPolygonLineSegment:()=>Ce,intersectPolygonRectangle:()=>_e,intersectPolylineBounds:()=>O,intersectPolylineLineSegment:()=>Ne,intersectPolylineRectangle:()=>Ee,intersectRayBounds:()=>be,intersectRayEllipse:()=>q,intersectRayLineSegment:()=>B,intersectRayPolygon:()=>Pe,intersectRayRay:()=>me,intersectRayRectangle:()=>Y,intersectRectangleArc:()=>j,intersectRectangleBounds:()=>fe,intersectRectangleCircle:()=>E,intersectRectangleEllipse:()=>k,intersectRectangleLineSegment:()=>N,intersectRectanglePolygon:()=>D,intersectRectanglePolyline:()=>X,intersectRectangleRay:()=>F,intersectRectangleRectangle:()=>w,pointsToLineSegments:()=>Z});var d=require("@tldraw/vec");function l(e,...n){return{didIntersect:n.length>0,message:e,points:n}}function I(e,n,t=0){let i=[e[0]+n[0]/2,e[1]+n[1]/2],r=d.Vec.rotWith(e,i,t),u=d.Vec.rotWith(d.Vec.add(e,[n[0],0]),i,t),s=d.Vec.rotWith(d.Vec.add(e,n),i,t),o=d.Vec.rotWith(d.Vec.add(e,[0,n[1]]),i,t);return[["top",[r,u]],["right",[u,s]],["bottom",[s,o]],["left",[o,r]]]}function oe(e,n,t){if(t===e||t===n)return!0;let i=Math.PI*2,r=(n-e+i)%i,u=(t-e+i)%i;return r<=Math.PI!=u>r}function ce(e,n){let t=d.Vec.slope(e[0],e[1]),i=d.Vec.slope(n[0],n[1]);if(t===i)return;if(Number.isNaN(t)&&!Number.isNaN(i))return[e[0][0],(e[0][0]-n[0][0])*i+n[0][1]];if(Number.isNaN(i)&&!Number.isNaN(t))return[n[0][0],(n[0][0]-e[0][0])*t+e[0][1]];let r=(t*e[0][0]-i*n[0][0]+n[0][1]-e[0][1])/(t-i),u=i*(r-n[0][0])+n[0][1];return[r,u]}function me(e,n,t,i){let r=t[0]-e[0],u=t[1]-e[1],s=i[0]*n[1]-i[1]*n[0],o=(u*i[0]-r*i[1])/s,c=(u*n[0]-r*n[1])/s;if(o<0||c<0)return l("miss");let m=n[1]/n[0],b=i[1]/i[0],f=e[1]-m*e[0],L=(t[1]-b*t[0]-f)/(m-b),h=m*L+f;return Number.isFinite(L)?l("intersection",[L,h]):l("parallel")}function B(e,n,t,i){let[r,u]=e,[s,o]=n,[c,m]=t,[b,f]=i;if(o/s!==(f-m)/(b-c)){let p=s*(f-m)-o*(b-c);if(p!==0){let L=((u-m)*(b-c)-(r-c)*(f-m))/p,h=((u-m)*s-(r-c)*o)/p;if(L>=0&&h>=0&&h<=1)return l("intersection",[r+L*s,u+L*o])}}return l("no intersection")}function Y(e,n,t,i,r=0){return F(t,i,r,e,n)}function q(e,n,t,i,r,u){let s=e,o=d.Vec.mul(n,999999999);return S(s,o,t,i,r,u)}function be(e,n,t,i=0){let{minX:r,minY:u,width:s,height:o}=t;return Y(e,n,[r,u],[s,o],i)}function de(e,n,t,i){return B(t,i,e,n)}function R(e,n,t,i){let r=d.Vec.sub(e,t),u=d.Vec.sub(i,t),s=d.Vec.sub(n,e),o=u[0]*r[1]-u[1]*r[0],c=s[0]*r[1]-s[1]*r[0],m=u[1]*s[0]-u[0]*s[1];if(o===0||c===0)return l("coincident");if(m===0)return l("parallel");if(m!==0){let b=o/m,f=c/m;if(0<=b&&b<=1&&0<=f&&f<=1)return l("intersection",d.Vec.add(e,d.Vec.mul(s,b)))}return l("no intersection")}function V(e,n,t,i){return N(t,i,e,n)}function $(e,n,t,i,r,u){let s=d.Vec.angle(t,r),o=d.Vec.angle(t,u),c=H(t,i,i,0,e,n);if(!c.didIntersect)return l("no intersection");let m=c.points.filter(b=>oe(s,o,d.Vec.angle(t,b)));return m.length===0?l("no intersection"):l("intersection",...m)}function y(e,n,t,i){let r=(n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1]),u=2*((n[0]-e[0])*(e[0]-t[0])+(n[1]-e[1])*(e[1]-t[1])),s=t[0]*t[0]+t[1]*t[1]+e[0]*e[0]+e[1]*e[1]-2*(t[0]*e[0]+t[1]*e[1])-i*i,o=u*u-4*r*s;if(o<0)return l("outside");if(o===0)return l("tangent");let c=Math.sqrt(o),m=(-u+c)/(2*r),b=(-u-c)/(2*r);if((m<0||m>1)&&(b<0||b>1))return m<0&&b<0||m>1&&b>1?l("outside"):l("inside");let f=[];return 0<=m&&m<=1&&f.push(d.Vec.lrp(e,n,m)),0<=b&&b<=1&&f.push(d.Vec.lrp(e,n,b)),l("intersection",...f)}function S(e,n,t,i,r,u=0){if(i===0||r===0||d.Vec.isEqual(e,n))return l("no intersection");i=i<0?i:-i,r=r<0?r:-r,e=d.Vec.sub(d.Vec.rotWith(e,t,-u),t),n=d.Vec.sub(d.Vec.rotWith(n,t,-u),t);let s=d.Vec.sub(n,e),o=s[0]*s[0]/i/i+s[1]*s[1]/r/r,c=2*e[0]*s[0]/i/i+2*e[1]*s[1]/r/r,m=e[0]*e[0]/i/i+e[1]*e[1]/r/r-1,b=[],f=c*c-4*o*m;if(f===0)b.push(-c/2/o);else if(f>0){let L=Math.sqrt(f);b.push((-c+L)/2/o),b.push((-c-L)/2/o)}let p=b.filter(L=>L>=0&&L<=1).map(L=>d.Vec.add(t,d.Vec.add(e,d.Vec.mul(d.Vec.sub(n,e),L)))).map(L=>d.Vec.rotWith(L,t,u));return l("intersection",...p)}function le(e,n,t){return K(t,e,n)}function a(e,n,t){let i=[];for(let r=1;r<t.length;r++){let u=R(e,n,t[r-1],t[r]);u&&i.push(...u.points)}return i.length===0?l("no intersection"):l("intersection",...t)}function v(e,n,t){let i=[];for(let r=1;r<t.length+1;r++){let u=R(e,n,t[r-1],t[r%t.length]);u&&i.push(...u.points)}return i.length===0?l("no intersection"):l("intersection",...t)}function F(e,n,t,i,r){return I(e,n,t).reduce((s,[o,[c,m]])=>{let b=B(i,r,c,m);return b&&s.push(l(o,...b.points)),s},[]).filter(s=>s.didIntersect)}function N(e,n,t,i){return I(e,n).reduce((u,[s,[o,c]])=>{let m=R(t,i,o,c);return m&&u.push(l(s,...m.points)),u},[]).filter(u=>u.didIntersect)}function w(e,n,t,i){return I(e,n).reduce((u,[s,[o,c]])=>{let m=N(t,i,o,c);return u.push(...m.map(b=>l(`${s} ${b.message}`,...b.points))),u},[]).filter(u=>u.didIntersect)}function j(e,n,t,i,r,u){return I(e,n).reduce((o,[c,[m,b]])=>{let f=G(t,i,r,u,m,b);return f&&o.push(x(T({},f),{message:c})),o},[]).filter(o=>o.didIntersect)}function E(e,n,t,i){return I(e,n).reduce((u,[s,[o,c]])=>{let m=y(o,c,t,i);return m&&u.push(x(T({},m),{message:s})),u},[]).filter(u=>u.didIntersect)}function k(e,n,t,i,r,u=0){return I(e,n).reduce((o,[c,[m,b]])=>{let f=S(m,b,t,i,r,u);return f&&o.push(x(T({},f),{message:c})),o},[]).filter(o=>o.didIntersect)}function fe(e,n,t){let{minX:i,minY:r,width:u,height:s}=t;return w(e,n,[i,r],[u,s])}function X(e,n,t){return I(e,n).reduce((r,[u,[s,o]])=>{let c=a(s,o,t);return c.didIntersect&&r.push(l(u,...c.points)),r},[]).filter(r=>r.didIntersect)}function D(e,n,t){return I(e,n).reduce((r,[u,[s,o]])=>{let c=v(s,o,t);return c.didIntersect&&r.push(l(u,...c.points)),r},[]).filter(r=>r.didIntersect)}function G(e,n,t,i,r,u){return $(r,u,e,n,t,i)}function C(e,n,t,i,r,u){return j(r,u,e,n,t,i)}function Le(e,n,t,i,r){let{minX:u,minY:s,width:o,height:c}=r;return C(e,n,t,i,[u,s],[o,c])}function Ie(e,n,t,i){return y(t,i,e,n)}function pe(e,n,t,i){let r=t[0]-e[0],u=t[1]-e[1],s=Math.sqrt(r*r+u*u),o=(s*s-i*i+n*n)/(2*s),c=Math.sqrt(n*n-o*o);return r/=s,u/=s,l("intersection",[e[0]+r*o-u*c,e[1]+u*o+r*c],[e[0]+r*o+u*c,e[1]+u*o-r*c])}function _(e,n,t,i){return E(t,i,e,n)}function he(e,n,t){let{minX:i,minY:r,width:u,height:s}=t;return _(e,n,[i,r],[u,s])}function ge(e,n,t,i,r,u){return q(r,u,e,n,t,i)}function H(e,n,t,i=0,r,u){return n===t?y(r,u,e,n):S(r,u,e,n,t,i)}function P(e,n,t,i=0,r,u){return n===t?E(r,u,e,n):k(r,u,e,n,t,i)}function J(e,n,t,i,r,u,s,o){return l("no intersection")}function Te(e,n,t,i,r,u){return J(e,n,t,i,r,u,u,0)}function xe(e,n,t,i,r){let{minX:u,minY:s,width:o,height:c}=r;return P(e,n,t,i,[u,s],[o,c])}function Be(e,n,t){let{minX:i,minY:r,width:u,height:s}=e;return Y(n,t,[i,r],[u,s])}function K(e,n,t){let{minX:i,minY:r,width:u,height:s}=e;return V(n,t,[i,r],[u,s])}function Re(e,n,t){let{minX:i,minY:r,width:u,height:s}=e;return w(n,t,[i,r],[u,s])}function ye(e,n){return w([e.minX,e.minY],[e.width,e.height],[n.minX,n.minY],[n.width,n.height])}function Se(e,n,t,i,r){let{minX:u,minY:s,width:o,height:c}=e;return C(n,t,i,r,[u,s],[o,c])}function ae(e,n,t){let{minX:i,minY:r,width:u,height:s}=e;return _(n,t,[i,r],[u,s])}function we(e,n,t,i,r=0){let{minX:u,minY:s,width:o,height:c}=e;return P(n,t,i,r,[u,s],[o,c])}function Xe(e,n){return O(n,e)}function Ye(e,n){return U(n,e)}function Ne(e,n,t){return a(n,t,e)}function Ee(e,n,t){return X(n,t,e)}function O(e,n){return X([n.minX,n.minY],[n.width,n.height],e)}function Ce(e,n,t){return a(n,t,e)}function _e(e,n,t){return X(n,t,e)}function U(e,n){return D([n.minX,n.minY],[n.width,n.height],e)}function Pe(e,n,t){return Z(t,!0).reduce((r,[u,s],o)=>{let c=B(e,n,u,s);return c&&r.push(l(o.toString(),...c.points)),r},[]).filter(r=>r.didIntersect)}function Z(e,n=!1){let t=[];for(let i=1;i<e.length;i++)t.push([e[i-1],e[i]]);return n&&t.push([e[e.length-1],e[0]]),t}module.exports=se(We);
//# sourceMappingURL=index.js.map
